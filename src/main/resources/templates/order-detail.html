<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<html lang="en">

<head>
    <title>订单详情</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <base th:href="@{/}">
    <link rel="shortcut icon" href="favicon.ico"> <link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">

    <!-- Data Tables -->
    <link href="css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">

    <link href="css/plugins/datapicker/datepicker3.css" rel="stylesheet">

    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css?v=4.1.0" rel="stylesheet">

    <!-- Sweet Alert -->
    <link href="css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <style>
        table td{
            text-align: center;
        }
        .tableLeft{
            background-color: #f5f5f5;
        }
        .tableLeft2{
            text-align: left;
        }
        .tableRight{
            text-align: right;
            background-color: #f5f5f5;
        }
        .tableContent{
            text-align: left;
            margin-left: 10px;
        }
    </style>
</head>
<body>
<div class="wrapper wrapper-content animated fadeInRight">
    <input type="hidden" id="orderId" th:value="${order.orderId}">
    <input type="hidden" id="orderStatusNew"  value="">
    <div class="row">
        <table class="table table-hover table-bordered">
            <tbody>
            <tr>
                <td class="tableLeft">订单号</td>
                <td class="tableContent"><span th:text="${order.orderNo}"></span></td>
                <td class="tableLeft">订单数量</td>
                <td class="tableContent"><span th:text="${order.orderCount}"></span></td>
                <td class="tableLeft">预付款</td>
                <td class="tableContent"><span th:text="${order.advancePrice}"></span></td>
                <td class="tableLeft"></td>
                <td class="tableContent"></td>
            </tr>
            <tr>
                <td class="tableLeft">订单总价</td>
                <td class="tableContent"><span th:text="${order.orderPrice}"></span></td>
                <td class="tableLeft">支付方式</td>
                <td class="tableContent"><span th:text="${pay_way_name}"></span></td>
                <td class="tableLeft">预付方式</td>
                <td class="tableContent"><span th:text="${advance_pay_way_name}"></span></td>
                <td class="tableLeft">订单标识</td>
                <td class="tableContent"><span th:text="${order.orderId}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">支付总价</td>
                <td class="tableContent"><span th:text="${order.realPrice}"></span></td>
                <td class="tableLeft">支付交易号</td>
                <td class="tableContent"><span th:text="${order.payCode}"></span></td>
                <td class="tableLeft">预付交易号</td>
                <td class="tableContent"><span th:text="${order.advancePayCode}"></span></td>
                <td class="tableLeft">地址标识</td>
                <td class="tableContent"><span th:text="${order.userAddrId}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">订单待付款</td>
                <td class="tableContent"><span th:text="${order.needpayPrice}"></span></td>
                <td class="tableLeft">支付时间</td>
                <td class="tableContent"><span th:text="${#dates.format(order.payTime,'yyyy-MM-dd HH:mm:ss')}"></span></td>
                <td class="tableLeft">预付时间</td>
                <td class="tableContent"><span th:text="${#dates.format(order.advancePayTime,'yyyy-MM-dd HH:mm:ss')}"></span></td>
                <td class="tableLeft">下单来源</td>
                <td class="tableContent"><span th:text="${order.orderFrom}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">用户标识</td>
                <td class="tableContent"><span th:text="${order.userId}"></span></td>
                <td class="tableLeft">快递公司</td>
                <td class="tableContent"><span th:text="${company_code_name}"></span></td>
                <td class="tableLeft">配送人员</td>
                <td class="tableContent"><span th:text="${order.postMan}"></span></td>
                <td class="tableLeft">退款金额</td>
                <td class="tableContent"><span th:text="${order.refundPrice}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">收货人姓名</td>
                <td class="tableContent"><span th:text="${order.userName}"></span></td>
                <td class="tableLeft">快递费</td>
                <td class="tableContent"><span th:text="${order.postPrice}"></span></td>
                <td class="tableLeft">配送人员电话</td>
                <td class="tableContent"><span th:text="${order.postPhone}"></span></td>
                <td class="tableLeft">优惠券标识</td>
                <td class="tableContent"><span th:text="${order.discountsId}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">收货人手机号</td>
                <td class="tableContent"><span th:text="${order.userPhone}"></span></td>
                <td class="tableLeft">快递单号</td>
                <td class="tableContent"><span th:text="${order.postNo}"></span></td>
                <td class="tableLeft">业务类型</td>
                <td class="tableContent"><span th:text="${business_type_name}"></span></td>
                <td class="tableLeft">优惠金额</td>
                <td class="tableContent"><span th:text="${order.discountsPrice}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">收货方式</td>
                <td class="tableContent"><span th:text="${post_way_name}"></span></td>
                <td class="tableLeft">发货时间</td>
                <td class="tableContent"><span th:text="${#dates.format(order.postTime,'yyyy-MM-dd HH:mm:ss')}"></span></td>
                <td class="tableLeft">下单时间</td>
                <td class="tableContent"><span th:text="${#dates.format(order.orderTime,'yyyy-MM-dd HH:mm:ss')}"></span></td>
                <td class="tableLeft">完成时间</td>
                <td class="tableContent"><span th:text="${#dates.format(order.finishTime,'yyyy-MM-dd HH:mm:ss')}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">收货人地址</td>
                <td colspan="7" style="text-align: left"><span th:text="${order.userAddr}"></span></td>
            </tr>
            <!--<tr>
                <td class="tableLeft">店铺名称</td>
                <td colspan="7"></td>
            </tr>-->
            <tr>
                <td class="tableLeft">优惠说明</td>
                <td colspan="7" style="text-align: left"><span th:text="${order.discountsRemark}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">用户备注</td>
                <td colspan="7" style="text-align: left"><span th:text="${order.userRemark}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">客服备注</td>
                <td colspan="7" style="text-align: left"><span th:text="${order.serviceRemark}"></span></td>
            </tr>
            <tr>
                <td class="tableLeft">退款原因</td>
                <td colspan="7" style="text-align: left"><span th:text="${order.refundRemark}"></span></td>
            </tr>
            <tr>
                <td colspan="8">
                    <table class="table table-hover table-bordered">
                        <tr>
                            <td class="tableRight">订单状态</td>
                            <td class="tableLeft2">
                                &nbsp;&nbsp;&nbsp;&nbsp;
                                <span th:text="${order_status_name}"></span>
                                <span style="cursor: pointer;margin-left: 20px" onclick="showOrderStatusLog()"><u>查看详细</u></span>
                            </td>
                        </tr>
                    </table>
                    <div id="orderStatusLogDiv" style="display: none">
                        <input type="hidden" value="0" id="statusShowMark">
                        <table id="orderStatusLog" class="table table-striped table-bordered table-hover">
                            <thead>
                            <tr>
                                <th>操作时间</th>
                                <th>操作人</th>
                                <th>客服备注</th>
                                <th>操作状态</th>
                            </tr>
                            </thead>
                            <tbody class="text-center">
                            </tbody>
                        </table>
                    </div>
                </td>
            </tr>
            <tr>
               <td colspan="20">
                   <!--0待付款-->
                   <div th:if="${order.orderStatus == 0}">
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='7'  type='button' onclick="setNewClickOrderStatus(this)" >设置已取消</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#resetOrderInfoModel"  class='btn btn-success' type='button' >修改订单信息</button>
                   </div>
                   <!--1已付款 orderPrice>0-->
                   <div th:if="${order.orderStatus == 1 && order.orderPrice>0}">
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='5'  type='button' onclick="setNewClickOrderStatus(this)" >设置待收货</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='9'  type='button' onclick="setNewClickOrderStatus(this)" >设置退款中</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#resetOrderInfoModel"  class='btn btn-success' type='button' >修改订单信息</button>
                   </div>
                   <!--1已付款 orderPrice=0-->
                   <div th:if="${order.orderStatus == 1 && order.orderPrice==0}">
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='3'  type='button' onclick="setNewClickOrderStatus(this)" >设置已失败</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='5'  type='button' onclick="setNewClickOrderStatus(this)" >设置待收货</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='7'  type='button' onclick="setNewClickOrderStatus(this)" >设置已取消</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#resetOrderInfoModel"  class='btn btn-success' type='button' >修改订单信息</button>
                   </div>
                   <!--5待收货-->
                   <div th:if="${order.orderStatus == 5}">
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='6'  type='button' onclick="setNewClickOrderStatus(this)" >设置已完成</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='9'  type='button' onclick="setNewClickOrderStatus(this)" >设置退款中</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#resetOrderInfoModel"  class='btn btn-success' type='button' >修改订单信息</button>
                   </div>
                   <!--9退款中-->
                   <div th:if="${order.orderStatus == 9}">
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='6'  type='button' onclick="setNewClickOrderStatus(this)" >设置已完成</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='10'  type='button' onclick="setNewClickOrderStatus(this)" >设置已退款</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#resetOrderInfoModel"  class='btn btn-success' type='button' >修改订单信息</button>
                   </div>
                   <!--12还货中-->
                   <div th:if="${order.orderStatus == 12}">
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='6'  type='button' onclick="setNewClickOrderStatus(this)" >设置已完成</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#orderUpdateStatusModel" class='btn btn-info' data-value='13'  type='button' onclick="setNewClickOrderStatus(this)" >设置已还货</button>&nbsp;&nbsp;
                       <button data-toggle="modal" data-target="#resetOrderInfoModel"  class='btn btn-success' type='button' >修改订单信息</button>
                   </div>
                   <!--非最终状态-->
                   <div th:if="${order.orderStatus != 0 && order.orderStatus != 1 && order.orderStatus != 4 && order.orderStatus != 5 && order.orderStatus != 9 && order.orderStatus != 12 }">
                       <button data-toggle="modal" data-target="#resetOrderInfoModel"  class='btn btn-success' type='button' >修改订单信息</button>
                   </div>
               </td>
            </tr>
            <tr>
               <td colspan="8">
                   <table id="orderDetail" class="table table-striped table-bordered table-hover">
                       <thead>
                       <tr>
                           <th>详情标识</th>
                           <th>商品标识</th>
                           <th>商品名称</th>
                           <th>规格名称</th>
                           <th>购买数量</th>
                           <th>销售价格</th>
                           <th>押金</th>
                           <th>是否抢购</th>
                           <th>取货时间</th>
                           <th>取货地点</th>
                           <th>还货时间</th>
                           <th>还货地点</th>
                           <th>是否卡券</th>
                           <th>详情状态</th>
                           <th>操作</th>
                       </tr>
                       </thead>
                       <tbody class="text-center" th:each="d:${detailOutList}" style="border: none">
                            <tr>
                                <td><span th:text="${d.detail_id}"></span></td>
                                <td><span th:text="${d.goods_id}"></span></td>
                                <td><span th:text="${d.goods_name}"></span></td>
                                <td><span th:text="${d.goods_spec_name}"></span></td>
                                <td><span th:text="${d.goods_count}"></span></td>
                                <td><span th:text="${d.sale_money}"></span></td>
                                <td><span th:text="${d.deposit_price}"></span></td>
                                <td><span th:text="${d.is_time_goods}"></span></td>
                                <td><span th:text="${d.get_time}"></span></td>
                                <td><span th:text="${d.get_addr_name}"></span></td>
                                <td><span th:text="${d.back_time}"></span></td>
                                <td><span th:text="${d.back_addr_name}"></span></td>
                                <td><span th:text="${d.is_coupon}"></span></td>
                                <td><span th:text="${d.detail_status_name}"></span></td>
                                <td>
                                    <!--待取货-->
                                    <div th:if="${d.detail_status == 0}">
                                        <button class='btn btn-info' data-value='1' th:value="${d.detail_id}" type='button' onclick="updateDetailStatus(this)">设置已取货</button><br> <div>&nbsp;</div>
                                        <button class='btn btn-info' data-value='2' th:value="${d.detail_id}" type='button' onclick="updateDetailStatus(this)">设置已取消</button><br> <div>&nbsp;</div>
                                        <button class='btn btn-info' data-value='5' th:value="${d.detail_id}" type='button' onclick="updateDetailStatus(this)">设置已退款</button>
                                    </div>
                                    <!--已取货-->
                                    <div th:if="${d.detail_status == 1}">
                                        <button class='btn btn-info' data-value='3' th:value="${d.detail_id}" type='button' onclick="updateDetailStatus(this)">设置已完成</button><br><div>&nbsp;</div>
                                        <button class='btn btn-info' data-value='4' th:value="${d.detail_id}" type='button' onclick="updateDetailStatus(this)">设置已退货(退款)</button>
                                    </div>
                                </td>
                            </tr>
                            <tr th:each="p:${d.detailPropOutList}">
                                <td colspan="5"><span th:text="${p.property_key}"></span></td>
                                <td colspan="5"><span th:text="${p.property_value}"></span></td>
                                <td colspan="5"><span th:text="${p.remark_name}"></span></td>
                            </tr>
                       </tbody>
                   </table>
               </td>
            </tr>
            <tr>
                <td colspan="10">
                    <input type="button" value="返回列表" onclick="javascript:window.location.href = 'order/orderPage'" class="btn btn-info">
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<div id="orderUpdateStatusModel" class="modal fade" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" ><span></span></h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group">
                        <label>客服备注：</label>
                        <textarea id="serviceRemark2" style="resize: none;width: 100%;border: 1px solid #e5e6e7"></textarea>
                    </div>
                    <div class="form-group" align="center">
                        <button type="button" class="btn btn-info" data-dismiss="modal">关闭</button>&nbsp;&nbsp;&nbsp;
                        <button type="button" class="btn btn-success" onclick="updateOrderStatus()">保存</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="resetOrderInfoModel" class="modal fade" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" >修改订单数据</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group">
                        <label><span style="color: red;font-weight: bold"> </span>密钥：</label>
                        <input type="text" placeholder="请输入密钥" class="form-control" id="resetKey" value="">
                    </div>
                    <div class="form-group">
                        <label>订单状态：</label>
                        <select class="form-control" name="orderStatus" id="orderStatus">
                            <option value="-1">-- 选择状态 --</option>
                            <option th:each="item : ${paramList}" th:value="${item.paramKey}"  th:text="${item.paramValue}" th:if="${item.status == 1 && item.paramCode == 'order_status'}"></option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label><span style="color: red;font-weight: bold"> </span>退款金额：</label>
                        <input type="text" placeholder="请输入退款金额" class="form-control" id="refundPrice" value="0.00">
                    </div>
                    <div class="form-group">
                        <label>退款原因：</label>
                        <textarea id="refundRemark" style="resize: none;width: 100%;border: 1px solid #e5e6e7"></textarea>
                    </div>
                    <div class="form-group">
                        <label>客服备注：</label>
                        <textarea id="serviceRemark" style="resize: none;width: 100%;border: 1px solid #e5e6e7"></textarea>
                    </div>
                    <div class="form-group">
                        <label><span style="color: red;font-weight: bold"> </span>快递人员姓名：</label>
                        <input type="text" placeholder="请输入快递人员姓名" class="form-control" id="postMan">
                    </div>
                    <div class="form-group">
                        <label><span style="color: red;font-weight: bold"> </span>快递人员电话：</label>
                        <input type="text" placeholder="请输入快递人员电话" class="form-control" id="postPhone">
                    </div>
                    <div class="form-group" align="center">
                        <button type="button" class="btn btn-info" data-dismiss="modal">关闭</button>&nbsp;&nbsp;&nbsp;
                        <button type="button" class="btn btn-success" onclick="resetOrderInfo()">保存</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- 全局js -->
<script src="js/jquery.min.js?v=2.1.4"></script>
<script src="js/bootstrap.min.js?v=3.3.6"></script>

<!-- Data Tables -->
<script src="js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="js/plugins/dataTables/dataTables.bootstrap.js"></script>

<!-- Data picker -->
<script src="js/plugins/datapicker/bootstrap-datepicker.js"></script>
<!-- layerDate plugin javascript -->
<script src="js/plugins/layer/laydate/laydate.js"></script>

<!-- Sweet alert -->
<script src="js/plugins/sweetalert/sweetalert.min.js"></script>

<!-- 自定义js -->
<script src="js/common.js" th:inline="javascript"></script>
<script th:inline="javascript">
    //加载数据
    loadOrderStatusLog();
    function loadOrderStatusLog() {
        var data = [[${orderLog}]];
        $('#orderStatusLog').dataTable( {
            "data": data,
            ordering: false,
            searching: false,
            paging:false,
            processing: false,
            length :-1,//当length = -1时，程序直接执行查询全部用户，不执行带有分页器的代码
            info:false,
            bLengthChange: false, //改变每页显示数据数量 [10, 20, 30, 40],
            "columns": [
                { "data": "createtime" },
                { "data": "lastalterman" },
                { "data": "remark" },
                { "data": "status_name" }
            ]
        } );
    }

    function showOrderStatusLog() {
        var statusShowMarkValue = $("#statusShowMark").val();
        if(statusShowMarkValue == 0){
            $("#statusShowMark").val(1);
            $("#orderStatusLogDiv").show();
        }else{
            $("#statusShowMark").val(0);
            $("#orderStatusLogDiv").hide();
        }
    }

    //修改订单详情状态
    function updateDetailStatus(obj) {
        var detailId,status;
        detailId = $(obj).attr("value");
        status = $(obj).attr("data-value");
        $.ajax({
            url: "order/updateDetailStatus",
            type: 'POST',
            data: {
                "detailId":detailId,
                "status":status
            },// 要提交的表单 ,
            async: false,
            cache: false,
            dataType: "json",
            success: function (data) {
                var code = data.code;
                if (code == '1') {
                    myAlertSimple(data.msg);
                    setTimeout("javascript:location.reload()",1000);
                }
            }
        });
    }

    //修改订单信息============开始====================
    $('#resetOrderInfoModel').modal({
        backdrop: 'static'
    });
    $('#resetOrderInfoModel').modal('hide')
    $('#resetOrderInfoModel').on('show.bs.modal', function () {
        var refundPrice = [[${order.refundPrice}]];
        var refundRemark = [[${order.refundRemark}]];
        var serviceRemark = [[${order.serviceRemark}]];
        var postMan = [[${order.postMan}]];
        var postPhone = [[${order.postPhone}]];
        var orderStatus = [[${order.orderStatus}]];

        $("#refundPrice").val(refundPrice);
        $("#refundRemark").val(refundRemark);
        $("#serviceRemark").val(serviceRemark);
        $("#postMan").val(postMan);
        $("#postPhone").val(postPhone);
        $("#orderStatus").val(orderStatus);
    })
    $('#resetOrderInfoModel').on('hidden.bs.modal', function () {
        //当模态框完全对用户隐藏时触发。
        //window.location.href = 'order/orderDetailPage?orderId='+$("#orderId").val();
    });
    function resetOrderInfo() {
        var resetKey = $("#resetKey").val();
        var orderStatus = $("#orderStatus").val();
        var refundPrice = $("#refundPrice").val();
        var refundRemark = $("#refundRemark").val();
        var serviceRemark = $("#serviceRemark").val();
        var postMan = $("#postMan").val();
        var postPhone = $("#postPhone").val();
        var orderId = $("#orderId").val();
        //校验
        if(resetKey == ''){
            return myAlertSimple("秘钥不能为空");
        }
        if(orderStatus == '-1'){
            return myAlertSimple("选择订单状态");
        }
        if(!numAndpoint(refundPrice)){
            return myAlertSimple("无效退款金额");
        }

        $.ajax({
            url: "order/orderReset",
            type: 'POST',
            data: {
                "resetKey":resetKey,
                "orderStatus":orderStatus,
                "refundPrice":refundPrice,
                "refundRemark":refundRemark,
                "serviceRemark":serviceRemark,
                "postMan":postMan,
                "postPhone":postPhone,
                "orderId":orderId
            },// 要提交的表单 ,
            async: false,
            cache: false,
            dataType: "json",
            success: function (data) {
                var code = data.code;
                if (code == '1') {
                    myAlertSimple(data.msg);
                    setTimeout("javascript:location.reload()",1000);
                }else{
                    myAlertSimple(data.msg);
                }
            }
        });
    }
    //修改订单信息============结束====================
    //修改订单状态============开始====================
    function setNewClickOrderStatus(obj){
        var orderStatusNew = $(obj).attr("data-value");
        $("#orderStatusNew").val(orderStatusNew);
    }
    $('#orderUpdateStatusModel').modal({
        backdrop: 'static'
    });
    $('#orderUpdateStatusModel').modal('hide');
    $('#orderUpdateStatusModel').on('show.bs.modal', function () {
        var serviceRemark = [[${order.serviceRemark}]];
        $("#serviceRemark2").val(serviceRemark);

        var orderStatus = $("#orderStatusNew").val()+'';
        var value = "";

        var list = [[${paramList}]];
        for (var i = 0; i < list.length; i++) {
            if(list[i].paramCode == 'order_status' && list[i].paramKey == orderStatus){
                value = list[i].paramValue;
                break;
            }
        }

        $(".modal-title>span").html("设置为"+value);

    })
    function updateOrderStatus() {
        var serviceRemark = $("#serviceRemark2").val();
        var orderStatus = $("#orderStatusNew").val();
        var orderId = $("#orderId").val();
        $.ajax({
            url: "order/updateOrderStatus",
            type: 'POST',
            data: {
                "serviceRemark":serviceRemark,
                "orderStatus":orderStatus,
                "orderId":orderId
            },// 要提交的表单 ,
            async: false,
            cache: false,
            dataType: "json",
            success: function (data) {
                var code = data.code;
                if (code == '5') {
                    myAlertSimple(data.msg);
                    setTimeout("javascript:location.reload()",1000);
                }else{
                    myAlertSimple(data.msg);
                }
            }
        });
    }
    //修改订单状态============结束====================
</script>
</body>
</html>